"use strict";(self.webpackChunkcar_sales_front=self.webpackChunkcar_sales_front||[]).push([[592],{5256:(p,_,e)=>{e.d(_,{I:()=>M,_:()=>b});var c=e(8645),i=e(9773),s=e(4664),E=e(2181),o=e(7398),r=e(2096),t=e(5879),n=e(7023),h=e(9910),l=e(2210),O=e(7006),T=e(6814);function C(a,U){if(1&a&&t._UZ(0,"nb-user",7),2&a){const u=t.oxw();t.Q6J("name",u.user.name)("title",u.user.role)("nbContextMenu",u.userMenu)}}var M=function(a){return a.PROFILE="Profile",a.LOGOUT="Logout",a}(M||{});let b=(()=>{class a{constructor(u,m,v,A,R){this.nbAuthService=u,this.authService=m,this.nbMenuService=v,this.router=A,this.themeService=R,this.unsubscribe$=new c.x,this.userMenu=[{title:M.LOGOUT}],this.items=[{title:"Reports",icon:"layout-outline",link:"reports"},{title:"Users",icon:"people-outline",link:"users"}],this.themeService.changeTheme("custom-theme"),this.nbAuthService.onTokenChange().pipe((0,i.R)(this.unsubscribe$),(0,s.w)(d=>{let g,P,f,D=d.token.user;return this.user=D,g=d.token.tokens.access.expires,f=d.token.tokens,P=new Date(g).getTime()-(new Date).getTime()-12e4,this.authService.setLocalStorage(D,f),this.authService.autoRefreshTokenTimer(P,f.refresh.token)}),(0,s.w)(d=>this.nbAuthService.refreshToken("email",{refreshToken:d}))).subscribe({next:()=>{},error:()=>{}})}ngOnInit(){this.nbMenuService.onItemClick().pipe((0,i.R)(this.unsubscribe$),(0,E.h)(({tag:u})=>"userContextMenu"===u),(0,o.U)(({item:{title:u}})=>u),(0,s.w)(u=>u===M.LOGOUT?this.authService.logout(this.authService.refreshTokenString).pipe((0,s.w)(()=>(0,r.of)({logout:!0}))):(0,r.of)("profile"))).subscribe(u=>{u.logout&&this.router.navigate(["/auth/login"])})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}static#t=this.\u0275fac=function(m){return new(m||a)(t.Y36(n._o),t.Y36(h.e),t.Y36(l.kkI),t.Y36(O.F0),t.Y36(l.WMF))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-admin"]],decls:12,vars:3,consts:[[1,"flex","justify-between","items-center","w-full"],[1,"text-3xl","font-black","brand","flex","items-center","gap-1"],["icon","cube-outline"],[1,"nav-header"],["size","large","nbContextMenuTag","userContextMenu","badgeStatus","success","badgePosition","bottom right",3,"name","title","nbContextMenu",4,"ngIf"],["state","compacted"],[3,"items","autoCollapse"],["size","large","nbContextMenuTag","userContextMenu","badgeStatus","success","badgePosition","bottom right",3,"name","title","nbContextMenu"]],template:function(m,v){1&m&&(t.TgZ(0,"nb-layout")(1,"nb-layout-header")(2,"div",0)(3,"div",1),t._UZ(4,"nb-icon",2),t._uU(5," carvision "),t.qZA(),t.TgZ(6,"div",3),t.YNc(7,C,1,3,"nb-user",4),t.qZA()()(),t.TgZ(8,"nb-sidebar",5),t._UZ(9,"nb-menu",6),t.qZA(),t.TgZ(10,"nb-layout-column"),t._UZ(11,"router-outlet"),t.qZA()()),2&m&&(t.xp6(7),t.Q6J("ngIf",v.user),t.xp6(2),t.Q6J("items",v.items)("autoCollapse",!0))},dependencies:[O.lC,T.O5,l.Aqw,l.dP_,l.dmS,l.fMN,l.k0$,l.SrF,l.nZR,l.mBz],styles:[".brand[_ngcontent-%COMP%]{font-weight:bolder;font-family:Ubuntu,sans-serif;color:#4e26a9}.brand[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:34px}"]})}return a})()},1768:(p,_,e)=>{e.d(_,{V:()=>c});class c{}},7428:(p,_,e)=>{e.d(_,{F:()=>o});var c=e(7845),i=e(1768),s=e(5879),E=e(9862);let o=(()=>{class r extends i.V{constructor(n){super(),this.http=n,this.url=c.N.apiURL}getAll(n){return this.http.get(n?`${this.url}/reports?${n}`:`${this.url}/reports`)}getByUser(n){return this.http.get(`${this.url}/reports/self?${n}`)}createReport(n){return this.http.post(`${this.url}/reports`,n)}createMultipleReport(n){return this.http.post(`${this.url}/reports`,n)}deleteReport(n){return this.http.delete(`${this.url}/reports/${n}`)}updateReport(n,h){return this.http.patch(`${this.url}/reports/${n}`,h)}static#t=this.\u0275fac=function(h){return new(h||r)(s.LFG(E.eN))};static#e=this.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()},9987:(p,_,e)=>{e.d(_,{w:()=>i});var c=e(5879);let i=(()=>{class s{constructor(){}boolean(o=!1){return r=>"boolean"!=typeof r.value&&o?{notBoolean:!0}:null}numeric(o=!1){return r=>{const t=r.value;return(null===t||isNaN(t))&&o?{notNumeric:!0}:null}}date(o=!1){return r=>{const t=r.value;return t instanceof Date&&!isNaN(t.getTime())||!o?null:{notDate:!0}}}password(o=!0){return r=>/^(?=.*[A-Z])(?=.*\d).{8,}$/.test(r.value)?null:{notPassword:!0}}static#t=this.\u0275fac=function(r){return new(r||s)};static#e=this.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},6208:(p,_,e)=>{e.d(_,{m:()=>E});var c=e(6814),i=e(2210),s=e(5879);let E=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=s.oAB({type:o});static#n=this.\u0275inj=s.cJS({imports:[c.ez,i.nKr,i.CG_,i.zyh,i.T2N,i.KdK]})}return o})()}}]);