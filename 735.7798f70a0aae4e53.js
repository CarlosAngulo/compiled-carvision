"use strict";(self.webpackChunkcar_sales_front=self.webpackChunkcar_sales_front||[]).push([[735],{1735:(J,g,s)=>{s.r(g),s.d(g,{UserModule:()=>F});var p=s(7006),u=s(6814),y=s(8645),Z=s(9773),f=s(4664),m=s(5256),e=s(5879),T=s(7023),A=s(9910),o=s(2210);function _(t,c){if(1&t&&e._UZ(0,"nb-user",5),2&t){const n=e.oxw();e.Q6J("name",n.user.name)("title",n.user.role)}}let U=(()=>{class t{constructor(n,i,r,l){this.nbAuthService=n,this.authService=i,this.router=r,this.themeService=l,this.unsubscribe$=new y.x,this.userMenu=[{title:m.I.PROFILE},{title:m.I.LOGOUT}],this.themeService.changeTheme("user-theme"),this.nbAuthService.onTokenChange().pipe((0,Z.R)(this.unsubscribe$),(0,f.w)(a=>{let h,v,d,b=a.token.user;return this.user=b,h=a.token.tokens.access.expires,d=a.token.tokens,v=new Date(h).getTime()-(new Date).getTime()-12e4,this.authService.setLocalStorage(b,d),this.authService.autoRefreshTokenTimer(v,d.refresh.token)}),(0,f.w)(a=>this.nbAuthService.refreshToken("email",{refreshToken:a}))).subscribe({next:()=>{},error:()=>{}})}ngOnInit(){}navigateTo(n){this.router.navigate([n])}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(T._o),e.Y36(A.e),e.Y36(p.F0),e.Y36(o.WMF))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-user"]],decls:8,vars:1,consts:[[1,"layout"],[1,"flex","justify-between","items-center","w-full","pb-8","px-3"],[1,"text-2xl","md:text-3xl","font-black","brand","flex","items-center","gap-1","text-violet-300"],[1,"nav-header","flex","justify-end","items-center","gap-4","w-full"],["size","large","badgeStatus","success","badgePosition","bottom right",3,"name","title",4,"ngIf"],["size","large","badgeStatus","success","badgePosition","bottom right",3,"name","title"]],template:function(i,r){1&i&&(e.TgZ(0,"nb-layout",0)(1,"nb-layout-column")(2,"header",1)(3,"div",2),e._uU(4," carvision "),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,_,1,2,"nb-user",4),e.qZA()(),e._UZ(7,"router-outlet"),e.qZA()()),2&i&&(e.xp6(6),e.Q6J("ngIf",r.user))},dependencies:[u.O5,o.Aqw,o.dP_,o.k0$,p.lC],styles:[".layout[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgb(77,46,99) 0%,rgb(38,36,80) 100%);display:block}.brand[_ngcontent-%COMP%]{font-weight:bolder;font-family:Ubuntu,sans-serif}"]})}return t})();var C=s(9397),x=s(1768);function P(t,c){1&t&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"There are no reviews during this period"),e.qZA(),e.BQk())}function w(t,c){if(1&t&&(e.TgZ(0,"div",9)(1,"div",10)(2,"span",11),e._uU(3),e.qZA(),e.TgZ(4,"span",12),e._uU(5,"Reviews"),e.qZA()(),e.TgZ(6,"div",13)(7,"span",14),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.TgZ(10,"span",12),e._uU(11,"Paid"),e.qZA()()()),2&t){const n=e.oxw(2);e.xp6(3),e.Oqu(n.totalReviews),e.xp6(5),e.Oqu(e.lcZ(9,2,n.paid))}}function R(t,c){if(1&t&&(e.TgZ(0,"div",27),e._UZ(1,"nb-icon",28),e.TgZ(2,"strong"),e._uU(3),e.qZA()()),2&t){const n=e.oxw().$implicit;e.xp6(3),e.Oqu(n.platform)}}function O(t,c){if(1&t&&(e.TgZ(0,"div",17)(1,"div",18)(2,"span",19),e._UZ(3,"nb-icon",20),e._uU(4),e.qZA(),e.YNc(5,R,4,1,"div",21),e.qZA(),e.TgZ(6,"div",22)(7,"div",23)(8,"strong"),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"span",24),e._uU(12,"Paid"),e.qZA()(),e.TgZ(13,"div",23)(14,"strong"),e._uU(15),e.qZA(),e.TgZ(16,"span",24),e._uU(17,"Rating"),e.qZA()(),e.TgZ(18,"div",25),e._UZ(19,"nb-icon",26),e.TgZ(20,"span",24),e._uU(21,"Positive"),e.qZA()()()()),2&t){const n=c.$implicit;e.xp6(4),e.hij(" ",n.client," "),e.xp6(1),e.Q6J("ngIf",n.platform),e.xp6(4),e.Oqu(e.lcZ(10,7,n.paid)),e.xp6(6),e.Oqu(n.rating),e.xp6(4),e.Tol(n.positive?"text-emerald-600":"text-red-500"),e.Q6J("icon",n.positive?"checkmark-circle-2-outline":"close-circle-outline")}}function k(t,c){if(1&t&&(e.ynx(0),e.TgZ(1,"nb-card")(2,"nb-card-body")(3,"h4",15),e._uU(4," Reviews "),e.qZA(),e.YNc(5,O,22,9,"div",16),e.qZA()(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(5),e.Q6J("ngForOf",n.reports)}}function I(t,c){if(1&t&&(e.TgZ(0,"div")(1,"nb-card")(2,"nb-card-body"),e.YNc(3,P,3,0,"ng-container",5),e.YNc(4,w,12,4,"ng-template",null,7,e.W1O),e.qZA()(),e.YNc(6,k,6,1,"ng-container",8),e.qZA()),2&t){const n=e.MAs(5),i=e.oxw();e.xp6(3),e.Q6J("ngIf",0===i.totalReviews)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",i.totalReviews>0)}}function S(t,c){1&t&&(e.TgZ(0,"nb-card")(1,"nb-card-body")(2,"div",29),e._UZ(3,"img",30),e.TgZ(4,"p",31),e._uU(5,"Please select a date range"),e.qZA()()()())}const j=[{path:"",component:U,children:[{path:"",redirectTo:"score",pathMatch:"full"},{path:"profile",component:(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile"]],decls:2,vars:0,template:function(i,r){1&i&&(e.TgZ(0,"p"),e._uU(1,"profile works!"),e.qZA())}})}return t})()},{path:"score",component:(()=>{class t{constructor(n){this.reportsService=n,this.showReports=!1,this.tableHeaders=["Client","Paid ","Positive","Rating","Submited","Platform"],this.loading=!1,this.paid=0,this.totalReviews=0}ngOnInit(){}getReports$(n){this.reports=[],this.loading=!0;let i="sortBy=createdAt:asc";for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i+=`&${r}=${n[r]}`);return this.reportsService.getByUser(i).pipe((0,C.b)(r=>this.loading=!1))}onDateRangeSelected(n){n.start&&n.end&&this.getReports$({startDate:new Date(n.start).getTime(),endDate:new Date(n.end).getTime()}).subscribe(i=>{this.reports=i.results,this.totalReviews=i.totalResults||0,this.paid=i.results.reduce((r,l)=>(l.paid||0)+r,0)})}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(x.V))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-payment"]],decls:9,vars:3,consts:[[1,"flex","justify-center","mb-6","gap-4"],["nbPrefix","","icon","calendar-outline"],["nbInput","","placeholder","Pick Date Range",3,"nbDatepicker"],[3,"rangeChange"],["formpicker",""],[4,"ngIf","ngIfElse"],["noResults",""],["reviews",""],[4,"ngIf"],[1,"flex","gap-4","justify-evenly"],[1,"flex","flex-col","gap-3","justify-center"],[1,"text-3xl","text-center","font-bold","text-purple-700"],[1,"uppercase","font-bold","text-center","text-neutral-500"],[1,"flex","flex-col","gap-3","justify-center","text-purple-700"],[1,"text-3xl","text-center","font-bold"],[1,"mb-4","text-purple-700","text-center","uppercase"],["class","flex flex-col gap-4 py-4 border-t border-t-indigo-200 ",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-4","py-4","border-t","border-t-indigo-200"],[1,"flex","justify-between","items-center"],[1,"text-xl","font-bold","text-indigo-800","flex","items-center"],["icon","person",1,"mr-1"],["class","text-neutral-600 text-sm flex gap-1 items-center",4,"ngIf"],[1,"flex","items-end","justify-center","xl:justify-start"],[1,"flex","flex-col","items-center","gap-1","border-r-2","border-r-indigo-200","px-5"],[1,"uppercase","text-neutral-500"],[1,"flex","flex-col","items-center","gap-1","px-5"],[3,"icon"],[1,"text-neutral-600","text-sm","flex","gap-1","items-center"],["icon","tv-outline"],[1,"flex","flex-col","gap-4","text-center"],["src","assets/images/calendar_placeholder.png","alt","",1,"max-h-56","object-contain"],[1,"font-bold","text-purple-800","text-lg"]],template:function(i,r){if(1&i&&(e.TgZ(0,"div",0)(1,"nb-form-field"),e._UZ(2,"nb-icon",1)(3,"input",2),e.TgZ(4,"nb-rangepicker",3,4),e.NdJ("rangeChange",function(a){return r.onDateRangeSelected(a)}),e.qZA()()(),e.YNc(6,I,7,3,"div",5),e.YNc(7,S,6,0,"ng-template",null,6,e.W1O)),2&i){const l=e.MAs(5),a=e.MAs(8);e.xp6(3),e.Q6J("nbDatepicker",l),e.xp6(3),e.Q6J("ngIf",r.reports)("ngIfElse",a)}},dependencies:[u.sg,u.O5,o.fMN,o.jBG,o.t3q,o.Asz,o.yKW,o.h8i,o.$kf,o.MGu,u.H9],styles:[".icon-reviews[_ngcontent-%COMP%]{margin-top:-56px;background-color:#fff;width:48px;height:48px;border-radius:400px;border:2px solid #333;display:flex;justify-content:center;align-items:center}"]})}return t})()}]}];let M=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(j),p.Bz]})}return t})();var q=s(7428),Y=s(6208);let F=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({providers:[{provide:x.V,useClass:q.F}],imports:[u.ez,o.KdK,o.V7y,o.oGl,o.MAY,o.zyh,o.nKr,o.BW0,o.uuI,o.AE1,p.Bz,Y.m,M,o.HKp,o.OA.forRoot()]})}return t})()}}]);